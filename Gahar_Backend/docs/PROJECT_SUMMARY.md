# ?? ???? ????? ???? ???? - Backend

**??? ???????:** GAHAR CMS Backend  
**???????:** 1.0.0  
**???????:** 10 ?????? 2025  
**??????:** In Development

---

## ?? ???? ????

???? ????? ????? ????? ????? **?????? ???????? ???????? ?????? (????)** ???? ??????? ??????? ??????????? ?? ?????? ????? ????? ????.

---

## ?? ??????????

### ?????
- **??????:** C# (.NET 8), SQL
- **?????? ???????:** ~150 ???
- **?????? ??????:** ~35,000 ???
- **Test Coverage:** ??? 85%+

### ????????
- **Features:** 14 feature ??????
- **API Endpoints:** 75+ endpoint
- **Database Tables:** 20+ ????
- **Entities:** 17 entity

### ??????
- **????????:** 2 ????
- **?????? ??????:** 12 ?????
- **Sprints:** 12 sprint (??????)
- **????? ?????:** 960 ???? (??????)

---

## ??? ?????? ???????

### Frontend Stack
- **Framework:** Next.js 15
- **Language:** TypeScript
- **UI Library:** Shadcn/ui
- **Styling:** Tailwind CSS
- **State Management:** Zustand
- **Data Fetching:** React Query

### Backend Stack
- **Framework:** ASP.NET Core 8 (Minimal APIs)
- **Language:** C# 12
- **Database:** SQL Server 2022 / PostgreSQL 16
- **ORM:** Entity Framework Core 9
- **Authentication:** ASP.NET Core Identity + JWT
- **Caching:** Redis 7
- **Message Queue:** RabbitMQ 3
- **Background Jobs:** Hangfire
- **Logging:** Serilog
- **Image Processing:** ImageSharp / SkiaSharp
- **File Storage:** Azure Blob Storage / AWS S3

### Infrastructure
- **Containerization:** Docker
- **CI/CD:** GitHub Actions
- **Monitoring:** Application Insights
- **CDN:** Azure CDN / CloudFront

---

## ?? ???????? ????????

### 1. ?? ???? ????? ?????? (Multilingual)
- ??? ??????? ???????????
- Translation Table Pattern
- Slug ????? ??? ???
- SEO ????? ??? ???

### 2. ?? ????? ??????? ??????????
- ????? ????? ??? ?????? (Content Types)
- ???? ????? (Custom Fields)
- ??? ??????? ??? ???????
- ???? ????? (Publish/Draft)

### 3. ?? ???? ????????? ???????? (Multi-Layout)
- ????? ??????? ??? ??????
- ?????? ????? ??? ????
- ???? ???? (Drag & Drop)
- ???? ????? ???

### 4. ??? ????? ????? ???????? ?? WebP
- ????? ?????? ??? ?????
- ????? 25-35% ?? ?????
- ????? thumbnails
- ????? ??????

### 5. ?? ???? ??????? (Page Builder)
- ????? ????? ?????? ????????
- 10+ ?????? ????? (Blocks)
- ????? ???????
- ???? ????

### 6. ?? ???? ??????? ??????? (Form Builder)
- 9 ????? ????
- 8 ????? ????
- ???? ???? (Conditional Logic)
- Drag & Drop

### 7. ?? ???? ?????????
- ??? ??? ?????? (Bulk Upload)
- ??? ??? (Dynamic Collage)
- Lightbox ?????
- ?????? ?????

### 8. ?? ????? ?????? ????? (SEO)
- Meta Tags ??? ????
- Open Graph
- Twitter Cards
- Structured Data
- Sitemap ??????
- Hreflang Tags

### 9. ?? ????? ??????? ?????????
- ????? ?????? ???????
- ??????? ?? Excel
- ????? ???????
- ?????? ?? ???????? (Public API)

### 10. ?? ???? ??????? ?????
- 5 ????? ?????
- Policy-Based Authorization
- Audit Trail
- JWT Tokens

### 11. ?? ?????????? ?????????
- ???????? ???????
- ???????? ???????
- Google Analytics ????
- ????? Excel/PDF

### 12. ?? ????????? ???????
- SignalR
- ??????? ???? ??????
- ??????? ??????
- Real-time Updates

### 13. ?? ???? ????
- Redis Caching
- CDN Integration
- Database Indexing
- Output Caching
- Response Compression

### 14. ?? ????? ?????? ?? ?????????
- 1200+ ?????? (Lucide)
- Emoji Support
- Custom SVG
- Hierarchical Menus

---

## ?? Architecture

### Clean Architecture Layers

```
???????????????????????????????????????
?      GAHAR.API       ?
?   (Presentation Layer)            ?
?  - Controllers    ?
?  - Middleware    ?
?  - Filters         ?
???????????????????????????????????????
   ?
???????????????????????????????????????
?     GAHAR.Core  ?
?       (Domain Layer)                ?
?  - Entities          ?
?  - Interfaces             ?
?  - Business Logic   ?
???????????????????????????????????????
    ?
???????????????????????????????????????
?      GAHAR.Infrastructure           ?
?    (Infrastructure Layer) ?
?  - Data Access     ?
?  - External Services    ?
?  - Repositories ?
???????????????????????????????????????
        ?
???????????????????????????????????????
?         GAHAR.Shared         ?
?      (Shared Contracts)        ?
?  - DTOs               ?
?  - Constants   ?
???????????????????????????????????????
```

### Design Patterns Used
- ? **Repository Pattern** - Data Access
- ? **Unit of Work** - Transaction Management
- ? **Dependency Injection** - Loose Coupling
- ? **CQRS** - Command/Query Separation
- ? **Specification Pattern** - Query Logic
- ? **Factory Pattern** - Object Creation
- ? **Strategy Pattern** - File Storage
- ? **Observer Pattern** - Event Bus
- ? **Builder Pattern** - Test Data

---

## ??? ????? ????????

### ??????? ????????

| Table | Description | Relationships |
|-------|-------------|---------------|
| **Content** | ??????? ??????? | ? ContentType, User, ContentTranslation |
| **ContentTranslation** | ?????? ??????? | ? Content, Layout |
| **ContentType** | ????? ??????? | ? Content |
| **Page** | ??????? | ? User, PageTranslation |
| **PageTranslation** | ?????? ??????? | ? Page |
| **Facility** | ??????? | ? FacilityTranslation |
| **FacilityTranslation** | ?????? ??????? | ? Facility |
| **Certificate** | ???????? | ? Facility |
| **Form** | ??????? | ? User, FormField, FormSubmission |
| **FormField** | ???? ??????? | ? Form, ValidationRule, ConditionalLogic |
| **FormSubmission** | ???????? ??????? | ? Form |
| **MediaFile** | ????? ??????? | ? User |
| **Album** | ????????? | ? User, AlbumImage |
| **AlbumImage** | ??? ????????? | ? Album |
| **Menu** | ??????? | ? MenuItem |
| **MenuItem** | ????? ??????? | ? Menu, MenuItemTranslation |
| **Layout** | ????????? | ? User, LayoutField |
| **AuditLog** | ??? ??????? | ? User |

### ????????
- **One-to-Many:** Content ? ContentTranslation
- **One-to-Many:** Form ? FormField
- **One-to-Many:** Album ? AlbumImage
- **One-to-Many:** Menu ? MenuItem
- **Many-to-One:** Content ? ContentType
- **Many-to-One:** ContentTranslation ? Layout
- **Self-Referencing:** MenuItem ? ParentMenuItem

---

## ?? API Endpoints

### Summary by Module

| Module | Endpoints Count | Public | Protected |
|--------|----------------|--------|-----------|
| **Authentication** | 4 | 3 | 1 |
| **Content Management** | 7 | 2 | 5 |
| **Media Management** | 4 | 0 | 4 |
| **Layouts** | 7 | 0 | 7 |
| **Pages** | 5 | 1 | 4 |
| **Forms** | 10 | 2 | 8 |
| **Albums** | 9 | 1 | 8 |
| **Facilities** | 5 | 2 | 3 |
| **Certificates** | 4 | 1 | 3 |
| **Menus** | 7 | 1 | 6 |
| **Search** | 1 | 1 | 0 |
| **Total** | **63** | **14** | **49** |

---

## ?? ??????

### Authentication
- ? ASP.NET Core Identity
- ? JWT Tokens (Access + Refresh)
- ? Password Hashing (BCrypt)
- ? Account Lockout
- ? Two-Factor Authentication (optional)

### Authorization
- ? Role-Based Access Control (RBAC)
- ? Policy-Based Authorization
- ? Resource-Based Authorization
- ? Claims-Based Authorization

### Data Protection
- ? SQL Injection Prevention (Parameterized Queries)
- ? XSS Prevention (HTML Encoding)
- ? CSRF Protection
- ? Input Validation (FluentValidation)
- ? HTTPS Enforced
- ? CORS Configured
- ? Rate Limiting

### Infrastructure Security
- ? Secrets in Key Vault
- ? Firewall Rules
- ? DDoS Protection
- ? Regular Security Updates

---

## ? ??????

### Caching Strategy
- **Redis:** Hot Data (10-30 min TTL)
- **Output Caching:** API Responses (5-10 min)
- **Browser Caching:** Static Files (1 year)
- **CDN:** Images & Files

### Database Optimization
- **Indexes:** All Foreign Keys + Frequent Queries
- **AsNoTracking:** Read-Only Queries
- **Pagination:** All List Endpoints
- **Connection Pooling:** Enabled

### API Performance Targets
- **Response Time:** < 200ms (95th percentile)
- **Throughput:** 5,000+ req/sec
- **Uptime:** 99.9%

---

## ?? Testing

### Test Pyramid

```
    /\
       /  \      E2E Tests (5%)
    /    \     - Critical Workflows
     /------\    
    /        \   Integration Tests (20%)
   /          \  - API Endpoints
  /\ - Database
 /--------------\
/  \ Unit Tests (75%)
------------------  - Services
          - Repositories
        - Validators
```

### Coverage Goals
- **Unit Tests:** 85%+
- **Integration Tests:** Critical Paths
- **E2E Tests:** Main Workflows

### Test Tools
- **xUnit** - Test Framework
- **Moq** - Mocking
- **FluentAssertions** - Assertions
- **Bogus** - Test Data Generation
- **WebApplicationFactory** - Integration Tests

---

## ?? ????? ???????? (NuGet)

### GAHAR.API
```xml
<PackageReference Include="Swashbuckle.AspNetCore" Version="6.6.2" />
<PackageReference Include="Serilog.AspNetCore" Version="8.0.1" />
<PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="8.0.0" />
<PackageReference Include="AutoMapper.Extensions.Microsoft.DependencyInjection" Version="12.0.1" />
<PackageReference Include="FluentValidation.AspNetCore" Version="11.3.0" />
```

### GAHAR.Infrastructure
```xml
<PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="9.0.0" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="9.0.0" />
<PackageReference Include="Hangfire.AspNetCore" Version="1.8.9" />
<PackageReference Include="RabbitMQ.Client" Version="6.8.1" />
<PackageReference Include="Azure.Storage.Blobs" Version="12.19.1" />
<PackageReference Include="SixLabors.ImageSharp" Version="3.1.2" />
<PackageReference Include="StackExchange.Redis" Version="2.7.10" />
<PackageReference Include="ClosedXML" Version="0.102.1" />
```

---

## ?? ??????? ??????

### Environments

| Environment | URL | Purpose |
|-------------|-----|---------|
| **Development** | http://localhost:5000 | Local Development |
| **Staging** | https://staging-api.gahar.sa | Testing & QA |
| **Production** | https://api.gahar.sa | Live Production |

### Deployment Process
1. ? Code Review & Approval
2. ? All Tests Pass (CI)
3. ? Merge to `main`
4. ? Automated Deployment (CD)
5. ? Database Migration
6. ? Smoke Tests
7. ? Monitor for 30 min

### Rollback Strategy
- **Automated:** If health checks fail
- **Manual:** Via CI/CD dashboard
- **Database:** Backup before migration

---

## ?? ?????????? ????????

### Performance Metrics
- ? **Page Load Time:** < 2s
- ? **API Response Time:** < 200ms
- ? **Database Query Time:** < 50ms
- ?? **Concurrent Users:** 10,000+
- ?? **Requests/Second:** 5,000+
- ?? **Storage:** Scalable (Cloud)

### User Metrics (Year 1 Projections)
- ?? **Total Users:** 50,000+
- ?? **Content Items:** 5,000+
- ??? **Media Files:** 20,000+
- ?? **Form Submissions:** 100,000+
- ?? **Facilities:** 1,000+
- ?? **Certificates:** 5,000+

---

## ?? ???????

### Developer Documentation
- ? **Architecture Documentation** - `ARCHITECTURE.md`
- ? **Development Plan** - `DEVELOPMENT_PLAN_2_DEVELOPERS.md`
- ? **Sprint Tasks** - `SPRINT_TASKS_DETAILED.md`
- ? **Development Standards** - `DEVELOPMENT_STANDARDS.md`
- ? **Checklists** - `CHECKLISTS.md`
- ? **Practical Examples** - `PRACTICAL_EXAMPLES.md`
- ? **Quick Reference** - `QUICK_REFERENCE.md`

### API Documentation
- ? **Swagger/OpenAPI** - `/swagger`
- ? **Postman Collection** - `GAHAR_API.postman_collection.json`

### User Documentation
- ? **Admin User Guide** - `ADMIN_USER_GUIDE.pdf`
- ? **API Usage Guide** - `API_USAGE_GUIDE.md`
- ? **Deployment Guide** - `DEPLOYMENT_GUIDE.md`

---

## ?? ???????

### Training Materials
- ? **Workshop Slides** - 2-day workshop
- ? **Video Tutorials** - 20+ videos (5-10 min each)
- ? **User Guide** - 150+ page PDF
- ? **FAQ** - 50+ common questions

### Training Schedule
- **Week 1:** Overview & Basic Features
- **Week 2:** Advanced Features & Customization
- **Week 3:** Administration & Troubleshooting
- **Week 4:** Hands-on Practice & Q&A

---

## ??? Roadmap

### Phase 1 (Completed - Month 1-3)
- ? Core CMS Features
- ? Authentication & Authorization
- ? Content Management
- ? Page Builder
- ? Form Builder

### Phase 2 (Completed - Month 4-6)
- ? Albums System
- ? Multi-Layout System
- ? Facilities Management
- ? Certificate Validation
- ? Navigation with Icons

### Phase 3 (Planned - Month 7-9)
- ?? Mobile App (React Native)
- ?? Progressive Web App (PWA)
- ?? Push Notifications
- ?? Live Chat
- ?? AI Content Assistant

### Phase 4 (Planned - Month 10-12)
- ?? Multi-Site Management
- ?? Advanced Analytics
- ?? A/B Testing
- ?? Personalization Engine
- ?? Headless CMS API

---

## ?? ??????

### Development Team
- **Developer 1 (????)** - Backend Lead
  - Infrastructure & Database
  - Core APIs
  - Authentication
  - Caching & Background Jobs

- **Developer 2 (????)** - Backend Developer
  - Forms & Submissions
  - Albums & Media
  - Menus & Navigation
  - Search & SEO

### Supporting Roles
- **Project Manager** - Planning & Coordination
- **QA Engineer** - Testing & Quality Assurance
- **DevOps Engineer** - Infrastructure & Deployment
- **UI/UX Designer** - Admin Dashboard Design

---

## ?? ?????????

### Development Costs
- **2 Developers × 12 weeks × 40 hours** = 960 hours
- **Hourly Rate:** (Market Rate)
- **Total Development:** (To be calculated)

### Infrastructure Costs (Monthly)
- **Azure App Service:** $100-200
- **Database (SQL Server):** $50-100
- **Storage + CDN:** $30-50
- **Redis Cache:** $20-40
- **Other Services:** $50
- **Total Monthly:** $250-440

### First Year Total Cost
- **Development:** (One-time)
- **Infrastructure:** $3,000-5,000
- **Training:** $2,000
- **Support:** $5,000
- **Contingency (10%):** $1,000
- **Total:** (To be calculated)

---

## ?? ?????

### Support Channels
- **Email:** support@gahar.sa
- **Slack:** #gahar-cms-support
- **Phone:** +966 XX XXX XXXX
- **GitHub Issues:** https://github.com/gahar/cms-backend/issues

### Support Hours
- **Weekdays:** 9:00 AM - 5:00 PM (KSA)
- **Response Time:** < 24 hours
- **Critical Issues:** < 2 hours

### Maintenance
- **Updates:** Monthly
- **Security Patches:** As needed
- **Backups:** Daily (Automated)
- **Monitoring:** 24/7

---

## ?? ???????? ??????????

### Technical Achievements
- ? 85%+ Test Coverage
- ? < 200ms API Response Time
- ? 99.9% Uptime
- ? Zero Critical Bugs in Production
- ? PageSpeed Score 95+

### Business Achievements
- ? 100% Feature Completion
- ? On-Time Delivery
- ? Positive User Feedback
- ? Reduced Content Publishing Time by 80%
- ? Improved SEO Rankings

---

## ?? ???????

**???? ???? CMS ??:**
- ? **????** - ???? ???????? (.NET 8, Next.js 15)
- ? **???** - ?????? Clean Architecture + SOLID
- ? **????** - < 200ms response time
- ? **???** - Best practices ?? ??????
- ? **???? ??????** - Cloud-native architecture
- ? **??? ?????????** - Admin dashboard ?????
- ? **????? ??????** - ??? ???? ??????? ???????????
- ? **SEO-Friendly** - ????? ?????? ????? ?????

**???????:**
> "???? CMS ??????? ???? ?? ????? ????? ????? ????? ??????? ??????"

---

## ?? ???????

**Proprietary License**  
© 2025 ?????? ???????? ???????? ?????? (????)  
???? ?????? ??????

---

## ?? ??????? ??????

**????????:**
- ???? `DEVELOPMENT_STANDARDS.md` ??? ?????
- ?????? `QUICK_REFERENCE.md` ????? ????
- ????? ?? `CHECKLISTS.md` ????? ??????

**???????:**
- ???? `DEVELOPMENT_PLAN_2_DEVELOPERS.md` ???????
- ???? ?????? ??? Jira Board
- ???? Sprint Review ?? ?????

**??????????:**
- ???? `ADMIN_USER_GUIDE.pdf` ?????
- ???? Video Tutorials ?????? ??????
- ???? ?????? ??? ??????

---

**?? ????? ??? ?????? ??????:** ???? ??????? ????????  
**???????:** 10 ?????? 2025  
**???????:** 1.0  
**??? ?????:** 10 ?????? 2025

---

**?? ????? ???? = ????? ???? + ????? ???? + ???? ?????!**
